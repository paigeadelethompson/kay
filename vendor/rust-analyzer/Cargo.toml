# THIS FILE IS AUTOMATICALLY GENERATED BY CARGO
#
# When uploading crates to the registry Cargo will automatically
# "normalize" Cargo.toml files for maximal compatibility
# with all versions of Cargo and also rewrite `path` dependencies
# to registry (e.g., crates.io) dependencies.
#
# If you are reading this file be aware that the original Cargo.toml
# will likely look very different (and much more reasonable).
# See Cargo.toml.orig for the original contents.

example = []
bench = []

[package]
edition = "2021"
rust-version = "1.80"
name = "rust-analyzer"
version = "0.0.0"
authors = ["rust-analyzer team"]
build = "build.rs"
autobins = false
autoexamples = false
autotests = false
autobenches = false
description = "A language server for the Rust programming language"
homepage = "https://rust-analyzer.github.io/"
documentation = "https://rust-analyzer.github.io/manual.html"
readme = false
license = "MIT OR Apache-2.0"
repository = "https://github.com/rust-lang/rust-analyzer"

[lib]
name = "rust_analyzer"
path = "src/lib.rs"
doctest = false

[[bin]]
name = "rust-analyzer"
path = "src/bin/main.rs"

[[test]]
name = "slow-tests"
path = "tests/slow-tests/main.rs"

[dependencies]
always-assert = "0.2.0"
dirs = "5.0.1"
memchr = "2.7.1"
num_cpus = "1.15.0"
oorandom = "11.1.3"
parking_lot = "0.12.1"
scip = "0.3.3"
toml = "0.8.8"
walkdir = "2.3.2"
xflags = "0.3.0"

[dependencies.anyhow]
version = "1.0.75"

[dependencies.cargo_metadata]
version = "0.18.1"

[dependencies.cfg]
version = "0.0.0"
path = "../cfg"
features = ["tt"]

[dependencies.crossbeam-channel]
version = "0.5.8"

[dependencies.dissimilar]
version = "1.0.7"

[dependencies.hir]
version = "0.0.0"
path = "../hir"

[dependencies.hir-def]
version = "0.0.0"
path = "../hir-def"

[dependencies.hir-ty]
version = "0.0.0"
path = "../hir-ty"

[dependencies.ide]
version = "0.0.0"
path = "../ide"

[dependencies.ide-db]
version = "0.0.0"
path = "../ide-db"

[dependencies.ide-ssr]
version = "0.0.0"
path = "../ide-ssr"

[dependencies.intern]
version = "0.0.0"
path = "../intern"

[dependencies.itertools]
version = "0.12.0"

[dependencies.load-cargo]
version = "0.0.0"
path = "../load-cargo"

[dependencies.lsp-server]
version = "0.7.6"

[dependencies.lsp-types]
version = "=0.95.0"
features = ["proposed"]

[dependencies.mimalloc]
version = "0.1.30"
optional = true
default-features = false

[dependencies.nohash-hasher]
version = "0.2.0"

[dependencies.parser]
version = "0.0.0"
path = "../parser"

[dependencies.paths]
version = "0.0.0"
path = "../paths"

[dependencies.proc-macro-api]
version = "0.0.0"
path = "../proc-macro-api"

[dependencies.process-wrap]
version = "8.0.2"
features = ["std"]

[dependencies.profile]
version = "0.0.0"
path = "../profile"

[dependencies.project-model]
version = "0.0.0"
path = "../project-model"

[dependencies.rayon]
version = "1.8.0"

[dependencies.rustc-hash]
version = "1.1.0"

[dependencies.semver]
version = "1.0.14"

[dependencies.serde]
version = "1.0.192"
features = ["derive"]

[dependencies.serde_json]
version = "1.0.108"
features = ["preserve_order"]

[dependencies.stdx]
version = "0.0.0"
path = "../stdx"

[dependencies.syntax]
version = "0.0.0"
path = "../syntax"

[dependencies.toolchain]
version = "0.0.0"
path = "../toolchain"

[dependencies.tracing]
version = "0.1.40"

[dependencies.tracing-subscriber]
version = "0.3.18"
features = [
    "registry",
    "fmt",
    "tracing-log",
]
default-features = false

[dependencies.tracing-tree]
version = "0.3.0"

[dependencies.triomphe]
version = "0.1.10"
features = ["std"]
default-features = false

[dependencies.vfs]
version = "0.0.0"
path = "../vfs"

[dependencies.vfs-notify]
version = "0.0.0"
path = "../vfs-notify"

[dev-dependencies]
expect-test = "1.4.0"

[dev-dependencies.syntax-bridge]
version = "0.0.0"
path = "../syntax-bridge"

[dev-dependencies.test-fixture]
path = "../test-fixture"

[dev-dependencies.test-utils]
path = "../test-utils"

[dev-dependencies.xshell]
version = "0.2.5"

[features]
force-always-assert = ["always-assert/force"]
in-rust-tree = [
    "sysroot-abi",
    "syntax/in-rust-tree",
    "parser/in-rust-tree",
    "hir/in-rust-tree",
    "hir-def/in-rust-tree",
    "hir-ty/in-rust-tree",
    "load-cargo/in-rust-tree",
]
jemalloc = [
    "jemallocator",
    "profile/jemalloc",
]
sysroot-abi = []

[target.'cfg(not(target_env = "msvc"))'.dependencies.jemallocator]
version = "0.5.0"
optional = true
package = "tikv-jemallocator"

[target."cfg(windows)".dependencies.windows-sys]
version = "0.52"
features = ["Win32_System_Threading"]

[lints.clippy]
assigning_clones = "allow"
dbg_macro = "warn"
enum_variant_names = "allow"
len_without_is_empty = "allow"
new_ret_no_self = "allow"
print_stderr = "warn"
print_stdout = "warn"
rc_buffer = "warn"
result_unit_err = "allow"
single_match = "allow"
str_to_string = "warn"
todo = "warn"
too_long_first_doc_paragraph = "allow"
too_many_arguments = "allow"
type_complexity = "allow"
useless_asref = "allow"
wrong_self_convention = "allow"

[lints.clippy.complexity]
level = "warn"
priority = -1

[lints.clippy.correctness]
level = "deny"
priority = -1

[lints.clippy.perf]
level = "deny"
priority = -1

[lints.clippy.restriction]
level = "allow"
priority = -1

[lints.clippy.style]
level = "warn"
priority = -1

[lints.clippy.suspicious]
level = "warn"
priority = -1

[lints.rust]
elided_lifetimes_in_paths = "warn"
explicit_outlives_requirements = "warn"
unreachable_pub = "warn"
unsafe_op_in_unsafe_fn = "warn"
unused_extern_crates = "warn"
unused_lifetimes = "warn"
